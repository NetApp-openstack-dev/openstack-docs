<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>

    <title>OpenStack Docs: Operational Concerns with ONTAP</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Bootstrap CSS -->
<link href="../_static/css/bootstrap.css" rel="stylesheet">

<!-- Pygments CSS -->
<link href="../_static/css/native.css" rel="stylesheet">

<!-- Fonts -->
<link href="../_static/css/font-awesome.css" rel="stylesheet">
<link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css'>

<!-- Custom CSS -->
<link href="../_static/css/combined.css" rel="stylesheet">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
<link rel="stylesheet" href="../_static/bespoke.css" type="text/css" />
<link rel="stylesheet" href="../_static/sphinxmark.css" type="text/css" />
  


<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-86037601-2', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->

  </head>
  <body>

<!-- SOURCE_FILE: https://github.com/NetApp-openstack-dev/openstack-docs/operations/section_cdot-ops.rst -->

 <script type="text/javascript">
    (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
                (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
        e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
    })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

    _st('install','aDn5L_vgZ2yzRcE893kK','2.0.0');
</script>
<nav class="navbar navbar-default" role="navigation">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button class="navbar-toggle" data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" type="button">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <div class="brand-wrapper">
        <a class="navbar-brand" href="http://netapp.io/openstack"></a>
      </div>
      <div class="search-icon hide"><i class="fa fa-search"></i> Search</div></div>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <div class="search-container tiny">
         <form class="docs-main-search-form">
    <input type="text" class="st-default-search-input custom-search-box" placeholder="Search OpenStack">
</form>
        <i class="fa fa-times close-search"></i>
      </div>
      <ul class="nav navbar-nav navbar-main show">
        <li>
           <li>
    <input type="text" class="st-default-search-input custom-search-box-mobile" placeholder="Search OpenStack">
</li>
        </li>
        <li>
          <a class="drop" id="dropdownMenuSoftware">Upstream Docs <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuSoftware">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://openstack.org/software/start/">Getting Started</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://openstack.org/projects/openstack-faq/">Common Questions</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://developer.openstack.org/">API Documentation</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/glance/pike">Glance Documentation</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/nova/pike">Nova Documentation</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/cinder/pike">Cinder Documentation</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/project-install-guide/shared-file-systems/draft/">Manila Documentation</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/project-install-guide/object-storage/draft/">Swift Documentation</a></li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
  <!-- /.container -->
</nav>
    <div class="container docs-book-wrapper">
      <div class="row">
        <div class="col-lg-9 col-md-8 col-sm-8 col-lg-push-3 col-md-push-4 col-sm-push-4">
<div class="row">
  <div class="col-lg-8">
      <h2>Operational Concerns with ONTAP</h2>
    
  </div>
  <div class="docs-actions">
    
    <a href="section_non-disruptive-ops.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Non-Disruptive Operations"></i></a>
    
    
    <a href="../ch_appendix.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Appendix"></i></a>
    
    <a id="logABugLink1" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
    
  </div>
</div>
          <div class="row docs-byline">
            <div class="docs-updated">updated: 2018-03-21 18:09</div>
          </div>
          <div class="row">
            <div class="col-lg-12">
              <div class="docs-top-contents">

<h5><a href="../index.html">Contents</a></h5>
<ul>
<li><a class="reference internal" href="#">Operational Concerns with ONTAP</a><ul>
<li><a class="reference internal" href="#nfs-v4-0-and-nfs-v4-1-configuration">NFS v4.0 and NFS v4.1 Configuration</a></li>
<li><a class="reference internal" href="#volume-migration">Volume Migration</a></li>
<li><a class="reference internal" href="#live-migration">Live Migration</a></li>
</ul>
</li>
</ul>

              </div>
              <div class="docs-body">

  <div class="section" id="operational-concerns-with-ontap">
<h1>Operational Concerns with ONTAP<a class="headerlink" href="#operational-concerns-with-ontap" title="Permalink to this headline">¶</a></h1>
<div class="section" id="nfs-v4-0-and-nfs-v4-1-configuration">
<h2>NFS v4.0 and NFS v4.1 Configuration<a class="headerlink" href="#nfs-v4-0-and-nfs-v4-1-configuration" title="Permalink to this headline">¶</a></h2>
<p>Be sure to refer to the <a class="reference external" href="http://www.netapp.com/us/system/pdf-reader.aspx?pdfuri=tcm:10-61288-16&amp;m=tr-4067.pdf">ONTAP NFS Best Practices and
Implementation
Guide</a>
for information on how to optimally set up NFS exports for use with
OpenStack storage services such as Cinder, Manila, and Glance.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In order to use NFS v4 and NFS v4.1 please modify the Export Rule’s
Access Details to Read-Only access using UNIX using System Manager
or via command line.</p>
</div>
<div class="figure" id="id1">
<a class="reference internal image-reference" href="../_images/create_export_rule_screenshot.png"><img alt="Creating Export Rule" src="../_images/create_export_rule_screenshot.png" style="width: 5.75000in;" /></a>
<p class="caption"><span class="caption-text">Figure 9.1. Creating Export Rule</span></p>
</div>
</div>
<div class="section" id="volume-migration">
<h2>Volume Migration<a class="headerlink" href="#volume-migration" title="Permalink to this headline">¶</a></h2>
<p>Volume migration for Cinder has been available since the Havana release
for ONTAP and the Icehouse release for E-Series.</p>
<p>The volume migration feature of Cinder can be used to aid in the
transition from ONTAP operating in 7-Mode to ONTAP
with minimal disruption. If you have volumes managed by Cinder on an
ONTAP operating in 7-Mode storage system, you can configure the
ONTAP instance as a new backend in the Cinder
configuration and leverage the migration feature to move existing
volumes to the new backend and then retire the ONTAP operating in
7-Mode system.</p>
<p>Once the two storage systems operate with Cinder, please verify that
both backends have been enabled successfully and are ready to support
the migration process.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cinder service list
+------------------+-------------------+------+---------+-------+--------------------------+
|      Binary      |       Host        | Zone |  Status | State |        Updated_at        |
+------------------+-------------------+------+---------+-------+--------------------------+
| cinder-scheduler |     openstack1    | nova | enabled |   up  | 2013-1-1T19:01:26.000000 |
|  cinder-volume   |  openstack1@7mode | nova | enabled |   up  | 2013-1-1T19:01:18.000000 |
|  cinder-volume   |  openstack1@cDOT  | nova | enabled |   up  | 2013-1-1T19:01:27.000000 |
+------------------+-------------------+------+---------+-------+--------------------------+
</pre></div>
</div>
<p>The host <a class="reference external" href="mailto:openstack1&#37;&#52;&#48;7mode">openstack1<span>&#64;</span>7mode</a> represents the backend representing the
ONTAP operating in 7-Mode system, and <a class="reference external" href="mailto:openstack1&#37;&#52;&#48;cDOT">openstack1<span>&#64;</span>cDOT</a> represents the
backend representing the ONTAP system. Volumes can be
migrated individually to the new backend, through the use of the cinder
migrate CLI command. For example, consider a Cinder volume with ID
781501e1-af79-4d3e-be90-f332a5841f5e on the <a class="reference external" href="mailto:openstack1&#37;&#52;&#48;7mode">openstack1<span>&#64;</span>7mode</a> storage
backend. In order to migrate it to the <a class="reference external" href="mailto:openstack1&#37;&#52;&#48;cDOT">openstack1<span>&#64;</span>cDOT</a> backend, please
execute:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># cinder migrate 781501e1-af79-4d3e-be90-f332a5841f5e openstack1@cDOT</span>
</pre></div>
</div>
<p>The command is asynchronous and completes in the background. In order to
check the status of the migration, use the cinder show command, and
ensure that migration_status indicates success:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># cinder show 781501e1-af79-4d3e-be90-f332a5841f5e</span>
<span class="o">...</span>
<span class="o">|</span>        <span class="n">migration_status</span>        <span class="o">|</span>         <span class="n">success</span>      <span class="o">|</span>
<span class="o">...</span>
</pre></div>
</div>
<p>While a volume migration is in progress, Cinder commands from tenants
that involve operations on the volume (such as attach/detach, snapshot,
clone, etc) will fail. If using a hypervisor that does not support live
migration of volumes and the volume is currently attached, it is
necessary to detach the volume from the Nova instance before performing
the migration. If the volume is the boot volume or otherwise critical to
the operation of the instance, please shutdown the Nova instance before
using cinder migrate.</p>
</div>
<div class="section" id="live-migration">
<h2>Live Migration<a class="headerlink" href="#live-migration" title="Permalink to this headline">¶</a></h2>
<p>Current support for live migration, a Nova feature, is available in the
Nova Feature Support Matrix. Details on using live migration for Nova
instances are available in the OpenStack Admin Guide and the Instance
Storage Options at the Hypervisor section.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In order to use live migration with E-Series it is necessary to set
netapp_enable_multiattach in <code class="docutils literal notranslate"><span class="pre">cinder.conf</span></code>. Please refer to Nova
Live Migration of Instances with Attached E-Series Volumes.</p>
</div>
</div>
</div>


              </div>
            </div>
          </div>
          <div class="docs-actions">
          
            <a href="section_non-disruptive-ops.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Non-Disruptive Operations"></i></a>
          
          
            <a href="../ch_appendix.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Appendix"></i></a>
          
            <a id="logABugLink3" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
          
          </div>
          <div class="row docs-byline bottom">
            <div class="docs-updated">updated: 2018-03-21 18:09</div>
          </div>
          <div class="row">
            <div class="col-lg-8 col-md-8 col-sm-8 docs-license">
<p>
 This document is licensed under
 <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 license</a>.
</p>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-4 docs-actions-wrapper">
            <!-- ID buglinkbottom added so that pre-filled doc bugs
                 are sent to Launchpad projects related to the
                 document -->
              <a href="#" id="logABugLink2" class="docs-footer-actions"><i class="fa fa-bug"></i> found an error? report a bug</a>
              <a href="http://netapp.io/slack/" class="docs-footer-actions"><i class="fa fa-question-circle"></i> questions?</a>
            </div>
          </div>
        </div>
<div class="col-lg-3 col-md-4 col-sm-4 col-lg-pull-9 col-md-pull-8 col-sm-pull-8 docs-sidebar">
  <div class="btn-group docs-sidebar-releases">
<a href="../index.html">
  <button href="#" type="button"
          class="btn docs-sidebar-release-select">NetApp OpenStack Docs 2018.1</button>
</a>

  </div>
  <div class="docs-sidebar-toc">
    <div class="docs-sidebar-section" id="table-of-contents">
      <h4></h4>
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../ch_executive-summary.html">Executive Summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch_openstack-overview.html">OpenStack Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch_netapp-storage.html">NetApp Systems and Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendices/appendix_packaging.html">Installing OpenStack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch_glance-image-service.html">Image Service (Glance)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch_nova.html">Compute Service (Nova)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch_cinder.html">Block Storage (Cinder)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch_manila.html">Shared Filesystems (Manila)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch_swift.html">Object Storage (Swift)</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../ch_operations.html">Day two operations</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="section_non-disruptive-ops.html">Non-Disruptive Operations</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Operational Concerns with ONTAP</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ch_appendix.html">Appendix</a></li>
</ul>

    </div>
  </div>
</div>
      </div>
    </div>
<footer>
  <div class="container">
    <div class="row footer-links">
      <div class="col-lg-2 col-sm-2">
        <h3>NetApp Resources</h3>
        <ul>
          <li><a href="http://netapp.io/openstack/#resources">NetApp OpenStack Resources</a></li>
          <li><a href="http://docs.netapp.com">NetApp documentation</a></li>
          <li><a href="http://www.netapp.com/us/media/tr-4620.pdf">NetApp SolidFire Storage Config Guide</a></li>
          <li><a href="https://mysupport.netapp.com/">NetApp Support</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>News</h3>
        <ul>
          <li><a href="http://netapp.io/blog/">Netapp's thePub</a></li>
          <li><a href="http://planet.openstack.org/">Community Blog</a></li>
          <li><a href="http://openstack.org/news/">Community News</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Social Media</h3>
        <ul>
          <li><a href="https://www.github.com/netapp">GitHub</a></li>
          <li><a href="http://netapp.io/slack">Slack</a></li>
          <li><a href="https://twitter.com/@openstacknetapp">Twitter @openstacknetapp</a></li>
          <li><a href="https://www.youtube.com/user/NetAppTV">Youtube NetAppTV</a></li>
        </ul>
      </div>
      <div class="col-lg-4 col-sm-4">
        <h3>Legal</h3>
        <p class="fine-print">
          The OpenStack project is provided under the
          <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 license</a>
        </p>
      </div>
    </div>
  </div>
</footer>
<!-- jQuery -->
<script type="text/javascript" src="../_static/js/jquery-3.1.1.js"></script>

<!-- Bootstrap JavaScript -->
<script type="text/javascript" src="../_static/js/bootstrap.js"></script>

<!-- The rest of the JS -->
<script type="text/javascript" src="../_static/js/navigation.js"></script>

<!-- Docs JS -->
<script type="text/javascript" src="../_static/js/docs.js"></script>

<!-- Popovers -->
<script type="text/javascript" src="../_static/js/webui-popover.js"></script>

<!-- Javascript for page -->
<script language="JavaScript">
/* build a description of this page including SHA, source location on git repo,
   build time and the project's launchpad bug tag. Set the HREF of the bug
   buttons */

    var lineFeed = "%0A";
    var gitURL = "Source: Can't derive source file URL";

    /* there have been cases where "pagename" wasn't set; better check for it */
        /* The URL of the source file on Git is based on the giturl variable
           in conf.py, which must be manually initialized to the source file
           URL in Git.
           "pagename" is a standard sphinx parameter containing the name of
           the source file, without extension.                             */

        var sourceFile = "operations/section_cdot-ops" + ".rst";
        gitURL = "Source: https://github.com/NetApp-openstack-dev/openstack-docs" + "/" + sourceFile;

    /* gitsha, project, bug_tag and watermark rely on variables in conf.py */
    var gitSha = "SHA: aec4c257b2abf6c01ad0bf9bc18b88f7f2077302";
        var bugProject = "NetApp-openstack-dev/openstack-docs";
        var bugTitle = "Operational Concerns with ONTAP in NetApp OpenStack Docs";
    var fieldTags = "docs, dog";
    var watermark = "QUEENS"
        var useStoryboard = "";


    /* "last_updated" is the build date and time. It relies on the
       conf.py variable "html_last_updated_fmt", which should include
       year/month/day as well as hours and minutes                   */
    var buildstring = "Release: 2018.1 on 2018-03-21 18:09";

    var fieldComment = encodeURI(buildstring) +
                       lineFeed + encodeURI(gitSha) +
                       lineFeed + encodeURI(gitURL) ;

    logABug(bugTitle, bugProject, fieldComment, fieldTags, watermark);
</script>

  </body>
</html>