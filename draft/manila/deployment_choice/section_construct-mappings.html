<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>

    <title>OpenStack Docs: Theory of Operation: Mapping NetApp to OpenStack Terminology</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Bootstrap CSS -->
<link href="../../_static/css/bootstrap.css" rel="stylesheet">

<!-- Pygments CSS -->
<link href="../../_static/css/native.css" rel="stylesheet">

<!-- Fonts -->
<link href="../../_static/css/font-awesome.css" rel="stylesheet">
<link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css'>

<!-- Custom CSS -->
<link href="../../_static/css/combined.css" rel="stylesheet">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
<link rel="stylesheet" href="../../_static/bespoke.css" type="text/css" />
<link rel="stylesheet" href="../../_static/sphinxmark.css" type="text/css" />
  


<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-86037601-2', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->

  </head>
  <body>

<!-- SOURCE_FILE: https://github.com/NetApp-openstack-dev/openstack-docs/manila/deployment_choice/section_construct-mappings.rst -->

 <script type="text/javascript">
    (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
                (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
        e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
    })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

    _st('install','aDn5L_vgZ2yzRcE893kK','2.0.0');
</script>
<nav class="navbar navbar-default" role="navigation">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button class="navbar-toggle" data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" type="button">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <div class="brand-wrapper">
        <a class="navbar-brand" href="http://netapp.io/openstack"></a>
      </div>
      <div class="search-icon hide"><i class="fa fa-search"></i> Search</div></div>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <div class="search-container tiny">
         <form class="docs-main-search-form">
    <input type="text" class="st-default-search-input custom-search-box" placeholder="Search OpenStack">
</form>
        <i class="fa fa-times close-search"></i>
      </div>
      <ul class="nav navbar-nav navbar-main show">
        <li>
           <li>
    <input type="text" class="st-default-search-input custom-search-box-mobile" placeholder="Search OpenStack">
</li>
        </li>
        <li>
          <a class="drop" id="dropdownMenuSoftware">Upstream Docs <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuSoftware">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://openstack.org/software/start/">Getting Started</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://openstack.org/projects/openstack-faq/">Common Questions</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://developer.openstack.org/">API Documentation</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/glance/pike">Glance Documentation</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/nova/pike">Nova Documentation</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/cinder/pike">Cinder Documentation</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/project-install-guide/shared-file-systems/draft/">Manila Documentation</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/project-install-guide/object-storage/draft/">Swift Documentation</a></li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
  <!-- /.container -->
</nav>
    <div class="container docs-book-wrapper">
      <div class="row">
        <div class="col-lg-9 col-md-8 col-sm-8 col-lg-push-3 col-md-push-4 col-sm-push-4">
<div class="row">
  <div class="col-lg-8">
      <h2>Theory of Operation: Mapping NetApp to OpenStack Terminology</h2>
    
  </div>
  <div class="docs-actions">
    
    <a href="../ch_manila-theory-and-deployment-choices.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Theory of Operation & Deployment Choices"></i></a>
    
    
    <a href="section_creating_service_catalog.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Theory of Operation: Storage Service Catalog and Manila Share Types"></i></a>
    
    <a id="logABugLink1" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
    
  </div>
</div>
          <div class="row docs-byline">
            <div class="docs-updated">updated: 2018-09-14 19:04</div>
          </div>
          <div class="row">
            <div class="col-lg-12">
              <div class="docs-top-contents">

<h5><a href="../../index.html">Contents</a></h5>
<ul>
<li><a class="reference internal" href="#">Theory of Operation: Mapping NetApp to OpenStack Terminology</a><ul>
<li><a class="reference internal" href="#manila-backends-and-ontap">Manila backends and ONTAP</a></li>
<li><a class="reference internal" href="#manila-shares-and-flexvol-volumes">Manila shares and FlexVol volumes</a></li>
<li><a class="reference internal" href="#manila-qos">Manila QoS</a></li>
<li><a class="reference internal" href="#manila-scheduling-and-resource-pool-selection">Manila scheduling and resource pool selection</a></li>
<li><a class="reference internal" href="#manila-snapshots-versus-netapp-snapshots">Manila snapshots versus NetApp Snapshots</a></li>
</ul>
</li>
</ul>

              </div>
              <div class="docs-body">

  <div class="section" id="theory-of-operation-mapping-netapp-to-openstack-terminology">
<h1>Theory of Operation: Mapping NetApp to OpenStack Terminology<a class="headerlink" href="#theory-of-operation-mapping-netapp-to-openstack-terminology" title="Permalink to this headline">¶</a></h1>
<div class="section" id="manila-backends-and-ontap">
<h2>Manila backends and ONTAP<a class="headerlink" href="#manila-backends-and-ontap" title="Permalink to this headline">¶</a></h2>
<p>Storage Virtual Machines (SVMs, formerly known as Vservers) contain one
or more FlexVol volumes and one or more LIFs through which they serve
data to clients.</p>
<p>SVMs securely isolate the shared virtualized data storage and network,
and each SVM appears as a single dedicated storage virtual machine to
clients. Each SVM has a separate administrator authentication domain and
can be managed independently by its SVM administrator.</p>
<p>In a cluster, SVMs facilitate data access. A cluster must have at least
one SVM to serve data. SVMs use the storage and network resources of the
cluster. However, the shares and LIFs are exclusive to the SVM. Multiple
SVMs can coexist in a single cluster without being bound to any node in
a cluster. However, they are bound to the physical cluster on which they
exist.</p>
</div>
<div class="section" id="manila-shares-and-flexvol-volumes">
<h2>Manila shares and FlexVol volumes<a class="headerlink" href="#manila-shares-and-flexvol-volumes" title="Permalink to this headline">¶</a></h2>
<p>ONTAP FlexVol volumes (commonly referred to as volumes) and
OpenStack File Share Storage shares (commonly referred to as Manila
shares) are semantically analogous. A FlexVol volume is a container of
logical data elements (for example: files, Snapshot copies, clones,
LUNs, etc.) that is abstracted from physical elements (for example:
individual disks, and RAID groups).</p>
</div>
<div class="section" id="manila-qos">
<span id="manila-qos-attribute"></span><h2>Manila QoS<a class="headerlink" href="#manila-qos" title="Permalink to this headline">¶</a></h2>
<p>Storage Quality of Service is a cluster-wide feature on ONTAP that requires no
additional license. It allows users to set throughput limits and/or monitor
IOPS or MB/s on the storage object. ONTAP enforces QoS via “policy-groups”,
a policy-group is a collection of QoS specifications where you may specify
throughput limits. On ONTAP, multiple storage objects can be assigned to a
policy-group, but assigning multiple storage objects renders them as part of
a “workload”. In case of QoS limits, this means that the limit is applied to
the sum of all the IOPS/BPS from all the storage objects assigned to the policy
group.</p>
<p>When using QoS via Manila, the driver will not allow sharing QoS
policy-groups. If a share type supports QoS, a new policy-group is created for
every share of that type.</p>
</div>
<div class="section" id="manila-scheduling-and-resource-pool-selection">
<span id="manila-scheduling-and-resource-selection"></span><h2>Manila scheduling and resource pool selection<a class="headerlink" href="#manila-scheduling-and-resource-pool-selection" title="Permalink to this headline">¶</a></h2>
<p>When Manila shares are created, the Manila scheduler selects a resource
pool from the available storage pools: see “<a class="reference internal" href="../key_concepts/section_manila-key-concepts.html#manila-storage-pools"><span class="std std-ref">Storage Pools</span></a>”
for an overview.</p>
<p>Beginning with Kilo, each of NetApp’s Manila drivers report per-pool
capacity to the scheduler.  When a new share is provisioned, the scheduler
capacity filter eliminates too-small pools from consideration.  Similarly,
the scheduler’s capability, availability zone and other filters narrow down
the list of potential backends that may receive a new share based on the share
type and other share characteristics.</p>
<p>The scheduler also has an evaluator filter that evaluates an optional arithmetic
expression to determine whether a pool may contain a new share.  Beginning
with Ocata, the ONTAP drivers report per-pool controller utilization values
to the scheduler, along with a “filter function” that prevents new shares from
being created on pools that are overutilized.  Controller utilization is computed
by the drivers as a function of CPU utilization and other internal I/O metrics.
The default filter function supplied by the ONTAP drivers is
“capabilities.utilization &lt; 70”, beyond which point latency may be adversely
affected by additional Manila shares.  The filter function may be overridden
on a per-backend basis in the Manila configuration file.</p>
<p>Each candidate pool that passes the filters is then considered by the scheduler’s
weighers so that the optimum one is chosen for a new share.  As stated above, as
of Kilo, the Manila scheduler has per-pool capacity information, and the scheduler
capacity weigher may be configured to spread new shares among backends uniformly
or to fill one backend before using another.</p>
<p>Beginning with Ocata, the ONTAP drivers report per-pool controller utilization values
to the scheduler, along with a “goodness function” that allows the scheduler to prioritize
backends that are less utilized.  Controller utilization is reported as a percentage,
and the goodness function is expected to yield a value between 0 and 100, with 100
representing maximum “goodness”.  The default goodness function supplied by the ONTAP
drivers is “100 - capabilities.utilization”, and it may be overridden on a per-backend
basis in the Manila configuration file.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The controller utilization values used by the filter and goodness functions are only
available when cluster-scoped credentials are supplied in the Manila configuration file.</p>
</div>
</div>
<div class="section" id="manila-snapshots-versus-netapp-snapshots">
<h2>Manila snapshots versus NetApp Snapshots<a class="headerlink" href="#manila-snapshots-versus-netapp-snapshots" title="Permalink to this headline">¶</a></h2>
<p>A NetApp Snapshot copy is a point-in-time file system image.
Low-overhead NetApp Snapshot copies are made possible by the unique
features of the WAFL storage technology that is part of ONTAP. The
high performance of the NetApp Snapshot makes it highly scalable. A
NetApp Snapshot takes only a few seconds to create — typically less than
one second, regardless of the size of the share or the level of activity
on the NetApp storage system. After a Snapshot copy has been created,
changes to data objects are reflected in updates to the current version
of the objects, as if NetApp Snapshot copies did not exist. Meanwhile,
the NetApp Snapshot version of the data remains completely stable. A
NetApp Snapshot incurs no performance overhead; users can comfortably
store up to 255 NetApp Snapshot copies per FlexVol volume, all of which
are accessible as read-only and online versions of the data.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Since NetApp Snapshots are taken at the FlexVol level, they can and
are directly leveraged within an Manila context, as a user of Manila
requests a snapshot be taken of a particular Manila share.</p>
</div>
</div>
</div>


              </div>
            </div>
          </div>
          <div class="docs-actions">
          
            <a href="../ch_manila-theory-and-deployment-choices.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Theory of Operation & Deployment Choices"></i></a>
          
          
            <a href="section_creating_service_catalog.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Theory of Operation: Storage Service Catalog and Manila Share Types"></i></a>
          
            <a id="logABugLink3" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
          
          </div>
          <div class="row docs-byline bottom">
            <div class="docs-updated">updated: 2018-09-14 19:04</div>
          </div>
          <div class="row">
            <div class="col-lg-8 col-md-8 col-sm-8 docs-license">
<p>
 This document is licensed under
 <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 license</a>.
</p>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-4 docs-actions-wrapper">
            <!-- ID buglinkbottom added so that pre-filled doc bugs
                 are sent to Launchpad projects related to the
                 document -->
              <a href="#" id="logABugLink2" class="docs-footer-actions"><i class="fa fa-bug"></i> found an error? report a bug</a>
              <a href="http://netapp.io/slack/" class="docs-footer-actions"><i class="fa fa-question-circle"></i> questions?</a>
            </div>
          </div>
        </div>
<div class="col-lg-3 col-md-4 col-sm-4 col-lg-pull-9 col-md-pull-8 col-sm-pull-8 docs-sidebar">
  <div class="btn-group docs-sidebar-releases">
<a href="../../index.html">
  <button href="#" type="button"
          class="btn docs-sidebar-release-select">NetApp OpenStack Docs 2018.1</button>
</a>

  </div>
  <div class="docs-sidebar-toc">
    <div class="docs-sidebar-section" id="table-of-contents">
      <h4></h4>
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../ch_executive-summary.html">Executive Summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ch_openstack-overview.html">OpenStack Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ch_netapp-storage.html">NetApp Systems and Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendices/appendix_packaging.html">Installing OpenStack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ch_glance-image-service.html">Image Service (Glance)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ch_nova.html">Compute Service (Nova)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ch_cinder.html">Block Storage (Cinder)</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../ch_manila.html">Shared Filesystems (Manila)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../overview/section_manila-overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../key_concepts/section_manila-key-concepts.html">Key Concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../process_structure/section_manila-processes.html">Process Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api_overview/section_manila-api-overview.html">API Overview</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../ch_manila-theory-and-deployment-choices.html">Theory of Operation &amp; Deployment Choices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch_manila-configuration.html">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch_manila-examples.html">Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../ch_swift.html">Object Storage (Swift)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ch_operations.html">Day two operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ch_appendix.html">Appendix</a></li>
</ul>

    </div>
  </div>
</div>
      </div>
    </div>
<footer>
  <div class="container">
    <div class="row footer-links">
      <div class="col-lg-2 col-sm-2">
        <h3>NetApp Resources</h3>
        <ul>
          <li><a href="http://netapp.io/openstack/#resources">NetApp OpenStack Resources</a></li>
          <li><a href="http://docs.netapp.com">NetApp documentation</a></li>
          <li><a href="http://www.netapp.com/us/media/tr-4620.pdf">NetApp SolidFire Storage Config Guide</a></li>
          <li><a href="https://mysupport.netapp.com/">NetApp Support</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>News</h3>
        <ul>
          <li><a href="http://netapp.io/blog/">Netapp's thePub</a></li>
          <li><a href="http://planet.openstack.org/">Community Blog</a></li>
          <li><a href="http://openstack.org/news/">Community News</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Social Media</h3>
        <ul>
          <li><a href="https://www.github.com/netapp">GitHub</a></li>
          <li><a href="http://netapp.io/slack">Slack</a></li>
          <li><a href="https://twitter.com/@openstacknetapp">Twitter @openstacknetapp</a></li>
          <li><a href="https://www.youtube.com/user/NetAppTV">Youtube NetAppTV</a></li>
        </ul>
      </div>
      <div class="col-lg-4 col-sm-4">
        <h3>Legal</h3>
        <p class="fine-print">
          The OpenStack project is provided under the
          <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 license</a>
        </p>
      </div>
    </div>
  </div>
</footer>
<!-- jQuery -->
<script type="text/javascript" src="../../_static/js/jquery-3.1.1.js"></script>

<!-- Bootstrap JavaScript -->
<script type="text/javascript" src="../../_static/js/bootstrap.js"></script>

<!-- The rest of the JS -->
<script type="text/javascript" src="../../_static/js/navigation.js"></script>

<!-- Docs JS -->
<script type="text/javascript" src="../../_static/js/docs.js"></script>

<!-- Popovers -->
<script type="text/javascript" src="../../_static/js/webui-popover.js"></script>

<!-- Javascript for page -->
<script language="JavaScript">
/* build a description of this page including SHA, source location on git repo,
   build time and the project's launchpad bug tag. Set the HREF of the bug
   buttons */

    var lineFeed = "%0A";
    var gitURL = "Source: Can't derive source file URL";

    /* there have been cases where "pagename" wasn't set; better check for it */
        /* The URL of the source file on Git is based on the giturl variable
           in conf.py, which must be manually initialized to the source file
           URL in Git.
           "pagename" is a standard sphinx parameter containing the name of
           the source file, without extension.                             */

        var sourceFile = "manila/deployment_choice/section_construct-mappings" + ".rst";
        gitURL = "Source: https://github.com/NetApp-openstack-dev/openstack-docs" + "/" + sourceFile;

    /* gitsha, project, bug_tag and watermark rely on variables in conf.py */
    var gitSha = "SHA: 49c95592d11a40972726ac22177f1459ba3ad34e";
        var bugProject = "NetApp-openstack-dev/openstack-docs";
        var bugTitle = "Theory of Operation: Mapping NetApp to OpenStack Terminology in NetApp OpenStack Docs";
    var fieldTags = "docs, dog";
    var watermark = "STEIN DRAFT"
        var useStoryboard = "";


    /* "last_updated" is the build date and time. It relies on the
       conf.py variable "html_last_updated_fmt", which should include
       year/month/day as well as hours and minutes                   */
    var buildstring = "Release: 2018.1 on 2018-09-14 19:04";

    var fieldComment = encodeURI(buildstring) +
                       lineFeed + encodeURI(gitSha) +
                       lineFeed + encodeURI(gitURL) ;

    logABug(bugTitle, bugProject, fieldComment, fieldTags, watermark);
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
  </body>
</html>