<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>

    <title>OpenStack Docs: Manila Network Plugins</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Bootstrap CSS -->
<link href="../../_static/css/bootstrap.css" rel="stylesheet">

<!-- Pygments CSS -->
<link href="../../_static/css/native.css" rel="stylesheet">

<!-- Fonts -->
<link href="../../_static/css/font-awesome.css" rel="stylesheet">
<link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css'>

<!-- Custom CSS -->
<link href="../../_static/css/combined.css" rel="stylesheet">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
<link rel="stylesheet" href="../../_static/bespoke.css" type="text/css" />
<link rel="stylesheet" href="../../_static/sphinxmark.css" type="text/css" />
  


<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-86037601-2', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->

  </head>
  <body>

<!-- SOURCE_FILE: https://github.com/NetApp-openstack-dev/openstack-docs/manila/configuration/section_network-plugins.rst -->

 <script type="text/javascript">
    (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
                (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
        e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
    })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

    _st('install','aDn5L_vgZ2yzRcE893kK','2.0.0');
</script>
<nav class="navbar navbar-default" role="navigation">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button class="navbar-toggle" data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" type="button">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <div class="brand-wrapper">
        <a class="navbar-brand" href="http://netapp.io/"></a>
      </div>
      <div class="search-icon show"><i class="fa fa-search"></i> Search</div></div>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <div class="search-container tiny">
         <form class="docs-main-search-form">
    <input type="text" class="st-default-search-input custom-search-box" placeholder="Search OpenStack">
</form>
        <i class="fa fa-times close-search"></i>
      </div>
      <ul class="nav navbar-nav navbar-main show">
        <li>
           <li>
    <input type="text" class="st-default-search-input custom-search-box-mobile" placeholder="Search OpenStack">
</li>
        </li>
        <li>
          <!-- <a href="https://www.openstack.org/software/" class="drop" id="dropdownMenuSoftware">Social Media <i class="fa fa-caret-down"></i></a> -->
          <a class="drop" id="dropdownMenuSoftware">Social Media<i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuSoftware">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://https://www.github.com/netapp">github/netapp</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://netapp.io/slack">slack</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://twitter.com/@openstacknetapp">twitter/@openstacknetapp</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.youtube.com/user/NetAppTV">youtube/users/NetAppTV</a></li>
          </ul>
        </li>
        <li>
          <!-- <a href="https://www.openstack.org/software/" class="drop" id="dropdownMenuSoftware">Upstream Docs <i class="fa fa-caret-down"></i></a> -->
          <a class="drop" id="dropdownMenuSoftware">Upstream Docs<i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuSoftware">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/ocata/install-guide-rdo/cinder.html">Cinder Documentation</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/ocata/install-guide-rdo/glance.html">Glance Documentation</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/project-install-guide/shared-file-systems/ocata/">Manila Documentation</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/ocata/install-guide-rdo/nova.html">Nova Documentation</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/project-install-guide/object-storage/ocata/">Swift Documentation</a></li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
  <!-- /.container -->
</nav>
    <div class="container docs-book-wrapper">
      <div class="row">
        <div class="col-lg-9 col-md-8 col-sm-8 col-lg-push-3 col-md-push-4 col-sm-push-4">
<div class="row">
  <div class="col-lg-8">
      <h2>Manila Network Plugins</h2>
    
  </div>
  <div class="docs-actions">
    
    <a href="../section_manila-configuration.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Configuration"></i></a>
    
    
    <a href="section_unified-driver.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: NetApp Data ONTAP Drivers for OpenStack File Share Storage (Manila)"></i></a>
    
    <a id="logABugLink1" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
    
  </div>
</div>
          <div class="row docs-byline">
            <div class="docs-updated">updated: 2017-08-25 19:28</div>
          </div>
          <div class="row">
            <div class="col-lg-12">
              <div class="docs-top-contents">

              </div>
              <div class="docs-body">

  <div class="section" id="manila-network-plugins">
<h1>Manila Network Plugins<a class="headerlink" href="#manila-network-plugins" title="Permalink to this headline">¶</a></h1>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>The NetApp driver only supports provisioning share servers (ONTAP
SVMs) on non-segmented (FLAT) networks and VLAN networks. While
tenants may be deployed on overlay networks (GRE, VXLAN, GENEVE),
Manila shares are only accessible over FLAT networks or VLAN
networks.</p>
<p>Your options are:</p>
<ul class="last simple">
<li><strong>Overlay tenant network + Provider Network</strong>: Deploy nova instances
within a VXLAN tenant network dedicated to the tenant access file
shares over a FLAT or VLAN shared provider network.</li>
<li><strong>VLAN tenant network</strong>: In this case, tenant networks are VLAN
networks. The networking service assigns a new VLAN segment when
a tenant creates a private network. This dedicated private
network can be used to deploy the tenant’s Nova instances as well
as access their file shares.</li>
</ul>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>OpenStack’s networking-as-a-service project is codenamed Neutron.
Neutron offers self service networking APIs to tenants. Tenant
networks are typically segmented virtual networks that are isolated
between each other and provide east-west network routing within the
OpenStack installation. For packets to flow into external networks,
including the internet, routers are created and attached to the
indicated networks as necessary. For in-flow, Network Address
Translation (NAT) is employed and IP addresses in the tenant router
namespace are mapped to IP addresses in the external network
namespace.</p>
<p>Aside from tenant networks, administrators can create “provider”
networks on Neutron, and share them with their OpenStack tenants.
Such networks can either be segmented or non-segmented (FLAT). On a
FLAT network, everyone shares the same network segment and hence
there isn’t any isolation of network traffic. There’s usually a very
good reason to use FLAT networks in OpenStack, such as sharing a
dedicated high bandwidth storage network with all tenants. In such
scenarios, network traffic is usually encrypted end-to-end providing
logical isolation of cross tenant traffic. Overlapping IP and subnet
ranges is not possible in this networking model.</p>
<p>Network segmentation is often accomplished using (VLANs).
Administrators may allow tenants to create VLAN networks. In this
case, each tenant network is assigned its own VLAN ID, and cross
tenant traffic is isolated at layer-2. Subnets and IP ranges are
allowed to safely overlap between tenant networks when the tenant
networks are isolated in separate VLANs. OVS (Open vSwitch) has an
ML2 plugin in Neutron that allocates internal VLANs on each compute
host. OVS creates the tunnel bridges necessary to route packets
between these VLAN networks. When combined with a hardware plugin
such as the Cisco Nexus plugin, VLANs are allocated on the external
hardware as well. Typically storage devices like NetApp ONTAP
Fabric-Attached Storage (FAS) are configured on these hardware
devices in a trunk configuration. VLANs are then created and managed
with the help of the hardware switch vendor’s ML2 plugin mechanism
driver in Neutron.</p>
<p>Keep in mind that VLANs are limited to the range of 1 to 4094. When
using VLANs, no more than 4092 isolated networks can exist. Keep
this scaling limitation in mind when designing your Openstack
environment. Other encapsulation methodologies aim to solve this
problem by encapsulating network packets with a larger virtual
networking identifier. GRE (Generic Routing Encapsulation), GENEVE
(Generic Network Virtualization Encapsulation) and VXLAN (Virtual
Extensible LAN) are the popular standards used with OpenStack
deployments.</p>
<p class="last">ONTAP does not natively support these layer-3 SDN network standards.
Deployers have the choice of using administrator configured
VLAN-only provider networks or VLAN-only tenant networks if using
Neutron.</p>
</div>
<p>As described in <a class="reference external" href="#manila.create_share_workflow.share_servers">???</a>,
there are a set of network plugins that provide for a variety of
integration approaches with Neutron and Standalone networks. These
plugins should only be used with the NetApp clustered Data ONTAP driver
when using share server management.</p>
<p>These are the valid network plugins:</p>
<ul>
<li><p class="first"><em>Standalone Network Plugin</em>: Use this plugin in stand-alone
deployments of OpenStack Manila, and in deployments where you don’t
desire to manage the storage network with Neutron. IP settings
(address range, subnet mask, gateway, version) are all defined
through configuration options within the driver-specific stanza. This
network can either be segmented (VLAN) or non-segmented (FLAT).
Overlay networks (VxLAN, GRE, Geneve) are not supported by the NetApp
driver.</p>
<p>Tenants <em>must not</em> specify Neutron network information when creating
share network objects. Values for segmentation protocol, IP address,
netmask and gateway are obtained from <code class="docutils literal"><span class="pre">manila.conf</span></code> when creating a
new share server.</p>
</li>
<li><p class="first"><em>Simple Neutron Network Plugin</em>: This is like the Standalone Network
Plugin, except that the network is managed by Neutron. Typically,
data center administrators that own a dedicated storage network would
want to manage such a network via Neutron so that virtual machines
can have access to storage resources on the storage network. In this
use case, an administrator creates a dedicated Neutron network and
provides the network details in the backend stanza of <code class="docutils literal"><span class="pre">manila.conf</span></code>
providing the network ID and subnet ID. Note that you may only use
FLAT or VLAN networks with the NetApp driver.</p>
<p>Tenants <em>must not</em> specify Neutron network information when creating
share network objects. Manila will derive values for segmentation
protocol, IP address, netmask and gateway from Neutron when creating
a new share server.</p>
</li>
<li><p class="first"><em>Configurable Neutron Network Plugin</em>: This is like the Simple
Network Neutron Plugin except that except that each share network
object will use a tenant or provider network of the tenant’s choice.
Please keep in mind that provider networks are created by OpenStack
administrators. For each tenant created share network, the NetApp
driver will create a new Vserver with the segmentation protocol, IP
address, netmask, protocol, and gateway obtained from Neutron. The
NetApp driver only supports provisioning Vservers on non-segmented
(FLAT) networks and VLAN networks.</p>
<p>Tenants <em>must</em> specify Neutron network information when creating
share network objects. Manila will derive values for segmentation
protocol, IP address, netmask and gateway from Neutron when creating
a new share server.</p>
</li>
<li><p class="first"><em>Simple Neutron Port Binding Network Plugin</em>: This plugin is very
similar to the simple Neutron network plugin, the only difference is
that this plugin can enforce port-binding. Port binding profiles from
the manila configuration file are sent to Neutron at the time of
creating network ports for the purpose of creating ONTAP LIFs. This
allows network agents to bind the ports based off these profiles.
When using multiple top of the rack switches to connect different
compute nodes, this plugin is also capable of performing Hierarchical
Port Binding. Administrators would configure the VLAN-only neutron
network to use in the backend stanza of the <code class="docutils literal"><span class="pre">manila.conf</span></code> and
tenants must create their own share network objects to allow the
NetApp driver to create VServers connected to this network.</p>
<p>Tenants <em>must not</em> specify Neutron network information when creating
share network objects. Manila will derive values for segmentation
protocol, IP address, netmask and gateway from Neutron when creating
a new share server.</p>
</li>
<li><p class="first"><em>Configurable Neutron Port Binding Network Plugin</em>: This plugin is
very similar to the configurable neutron network plugin, the only
difference is that this plugin can enforce port-binding. Port binding
profiles from the manila configuration file are sent to Neutron at
the time of creating network ports for the purpose of creating ONTAP
LIFs. This allows network agents to bind the ports based off these
profiles. When using multiple top of the rack switches to connect
different compute nodes, this plugin is also capable of performing
Hierarchical Port Binding. Share networks can be defined with VLAN
shared provider networks or VLAN tenant networks. Administrators are
required to define one or more binding profiles in <code class="docutils literal"><span class="pre">manila.conf</span></code>
per backend configured with this plugin. Manila consumes bound
network ports and invokes the NetApp driver to create LIFs assigned
to the network segment and IP address as chosen.</p>
<p>Tenants <em>must</em> specify Neutron network information when creating
share network objects. Manila will derive values for segmentation
protocol, IP address, netmask and gateway from Neutron when creating
a new share server..</p>
</li>
</ul>
<div class="figure" id="id1">
<a class="reference internal image-reference" href="../../_images/manila_hierarchical_port_binding.png"><img alt="Hierarchical Network Topology" src="../../_images/manila_hierarchical_port_binding.png" style="width: 2.75000in;" /></a>
<p class="caption"><span class="caption-text">Hierarchical Network Topology</span></p>
</div>
<p>The network plugin is chosen by setting the value of the network_api_class
configuration option within the driver-specific stanza of the manila.conf
configuration file.</p>
<p>To set up the standalone network plugin, the following options should be
added to the driver-specific stanza within the Manila configuration file
(<code class="docutils literal"><span class="pre">manila.conf</span></code>):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">network_api_class</span> <span class="o">=</span> <span class="n">manila</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">standalone_network_plugin</span><span class="o">.</span><span class="n">StandaloneNetworkPlugin</span>
<span class="n">standalone_network_plugin_allowed_ip_ranges</span> <span class="o">=</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">0.10</span><span class="o">-</span><span class="mf">10.0</span><span class="o">.</span><span class="mf">0.254</span>
<span class="n">standalone_network_plugin_ip_version</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">standalone_network_plugin_segmentation_id</span> <span class="o">=</span> <span class="mi">314</span>
<span class="n">standalone_network_plugin_network_type</span> <span class="o">=</span> <span class="n">vlan</span>
<span class="n">standalone_network_plugin_mask</span> <span class="o">=</span> <span class="mf">255.255</span><span class="o">.</span><span class="mf">255.0</span>
<span class="n">standalone_network_plugin_gateway</span> <span class="o">=</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">0.1</span>
</pre></div>
</div>
<p><a class="reference external" href="#manila.configuration.network.standalone.options">table_title</a>
lists the configuration options available for the standalone network
plugin:</p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="3%" />
<col width="4%" />
<col width="76%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Type</th>
<th class="head">Default Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">standalone_network_plugin_gateway</span></code></td>
<td>Required</td>
<td>&#160;</td>
<td>Specify the gateway IP address that should be configured on the data LIF through which the share is exported. A Vserver static route is configured using this gateway.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">standalone_network_plugin_mask</span></code></td>
<td>Required</td>
<td>&#160;</td>
<td>Specify the subnet mask that should be configured on the data LIF through which the share is exported. You can specify the CIDR suffix (without the slash, e.g. <code class="docutils literal"><span class="pre">24</span></code>) or the full netmask (e.g. <code class="docutils literal"><span class="pre">255.255.255.0</span></code>).</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">standalone_network_plugin_segmentation_id</span></code></td>
<td>Optional</td>
<td>&#160;</td>
<td>Specify the segmentation ID that should be assigned to data LIFs through which shares can be exported. This option is not necessary if the <code class="docutils literal"><span class="pre">standalone_network_plugin_network_type</span> <span class="pre">is</span> <span class="pre">set</span> <span class="pre">to</span> <span class="pre">``flat</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">standalone_network_plugin_allowed_ip_ranges</span></code></td>
<td>Optional</td>
<td>&#160;</td>
<td>Specify the range of IP addresses that can be used on data LIFs through which shares can be exported. An example of a valid range would be <code class="docutils literal"><span class="pre">10.0.0.10-10.0.0.254</span></code>.
If this value is not specified, the entire range of IP addresses within the network computed by applying the value of <code class="docutils literal"><span class="pre">standalone_network_plugin_mask</span></code> to the value of
standalone_network_plugin_gateway``. In this case, the broadcast, network, and gateway addresses are automatically excluded.                                                                                                                                                                                       |</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">standalone_network_plugin_ip_version`</span></code></td>
<td>Optional</td>
<td>4</td>
<td>Specify the IP version for the network that should be configured on the data LIF through which the share is exported. Valid values are <code class="docutils literal"><span class="pre">4</span></code> or <code class="docutils literal"><span class="pre">6</span></code>.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">standalone_network_plugin_network_type</span></code></td>
<td>Optional</td>
<td>flat</td>
<td>Specify the network type as one of <code class="docutils literal"><span class="pre">flat</span></code> or <code class="docutils literal"><span class="pre">vlan</span></code>. If unspecified, the driver assumes the network is non-segmented. If using <code class="docutils literal"><span class="pre">vlan</span></code>, specify the <code class="docutils literal"><span class="pre">standalone_network_plugin_segmentation_id</span></code> option as well.</td>
</tr>
</tbody>
</table>
<p>Table: Configuration options for Standalone Network Plugin</p>
<p>In this configuration, administrators set up a single neutron network
and specify the network information in <code class="docutils literal"><span class="pre">manila.conf</span></code>. Manila will create
network ports on the network and gather details regarding the IP address,
gateway, netmask and MTU from this network. These details are used by the
NetApp driver to create Data Logical Interfaces (LIFs) for the SVM
created. In this configuration, tenants need to create “empty” share network
objects, without specifying any network information. To set up the
simple Neutron network plugin, the following options should be added to
the driver-specific stanza within the Manila configuration file
(<code class="docutils literal"><span class="pre">manila.conf</span></code>):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">network_api_class</span> <span class="o">=</span> <span class="n">manila</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">neutron</span><span class="o">.</span><span class="n">neutron_network_plugin</span><span class="o">.</span><span class="n">NeutronSingleNetworkPlugin</span>
<span class="n">neutron_net_id</span> <span class="o">=</span> <span class="mi">37</span><span class="n">fb9f7e</span><span class="o">-</span><span class="mi">4</span><span class="n">ffe</span><span class="o">-</span><span class="mi">4900</span><span class="o">-</span><span class="mi">8</span><span class="n">dba</span><span class="o">-</span><span class="n">c6d4251e588e</span>
<span class="n">neutron_subnet_id</span><span class="o">=</span> <span class="mi">447732</span><span class="n">be</span><span class="o">-</span><span class="mi">4</span><span class="n">cf2</span><span class="o">-</span><span class="mi">42</span><span class="n">b0</span><span class="o">-</span><span class="mi">83</span><span class="n">dc</span><span class="o">-</span><span class="mi">4</span><span class="n">b6f4ed5368c</span>
</pre></div>
</div>
<p><a class="reference external" href="#manila.configuration.network.neutron.options">table_title</a> lists
the configuration options available for the Neutron network plugin:</p>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="9%" />
<col width="13%" />
<col width="58%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Type</th>
<th class="head">Default Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">neutron_net_id</span></code></td>
<td>Required</td>
<td>&#160;</td>
<td>Specify the ID of a Neutron network from which ports should be created.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">neutron_subnet_id</span></code></td>
<td>Required</td>
<td>&#160;</td>
<td>Specify the ID of a Neutron subnet from which ports should be created.</td>
</tr>
</tbody>
</table>
<p>Table: Configuration options for Neutron Network Plugin</p>
<p>In this configuration, tenants can specify network details in their own
share network objects. These network details can be from administrator
created Neutron provider networks or tenant created Neutron networks. To
set up the configurable Neutron network plugin, the following options
should be added to the driver-specific stanza within the Manila
configuration file (<code class="docutils literal"><span class="pre">manila.conf</span></code>):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">network_api_class</span> <span class="o">=</span> <span class="n">manila</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">neutron</span><span class="o">.</span><span class="n">neutron_network_plugin</span><span class="o">.</span><span class="n">NeutronNetworkPlugin</span>
</pre></div>
</div>
<p>In this configuration, administrators set up a single neutron network,
and Manila will send any binding profiles configured in <code class="docutils literal"><span class="pre">manila.conf</span></code>
to Neutron while creating ports on the network. As noted prior, Neutron
may be configured with a hardware switch to provide tenant networks with
access to devices connected to the hardware switch. You may use the
switch vendor’s ML2 mechanism driver to dynamically allocate segments
corresponding to the segments created on the OpenStack compute hosts by
OVS. This port binding network plugin is crucial to ensure that port
binding occurs at the mechanism driver. Verify with your switch vendor
if they support binding profiles. While most vendors support port
binding, some may not support the “baremetal” vnic_type. Use of this
plugin is preferable when using a hierarchical virtual network that uses
different network segments. These segments can be of different network
types (ex: VLAN within the rack and VXLAN between the top-of-rack and
core switches). To set up the simple Neutron port binding network
plugin, the following options should be added to the driver-specific
stanza within the Manila configuration file (<code class="docutils literal"><span class="pre">manila.conf</span></code>). The
Neutron binding profile in this example is for a Cisco Nexus 9000
switch:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">network_api_class</span> <span class="o">=</span> <span class="n">manila</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">neutron</span><span class="o">.</span><span class="n">neutron_network_plugin</span><span class="o">.</span><span class="n">NeutronBindSingleNetworkPlugin</span>
<span class="n">neutron_net_id</span> <span class="o">=</span> <span class="mi">37</span><span class="n">fb9f7e</span><span class="o">-</span><span class="mi">4</span><span class="n">ffe</span><span class="o">-</span><span class="mi">4900</span><span class="o">-</span><span class="mi">8</span><span class="n">dba</span><span class="o">-</span><span class="n">c6d4251e588e</span>
<span class="n">neutron_subnet_id</span> <span class="o">=</span> <span class="mi">447732</span><span class="n">be</span><span class="o">-</span><span class="mi">4</span><span class="n">cf2</span><span class="o">-</span><span class="mi">42</span><span class="n">b0</span><span class="o">-</span><span class="mi">83</span><span class="n">dc</span><span class="o">-</span><span class="mi">4</span><span class="n">b6f4ed5368c</span>
<span class="n">neutron_host_id</span> <span class="o">=</span> <span class="n">netapp_lab42</span>
<span class="n">neutron_vnic_type</span> <span class="o">=</span> <span class="n">baremetal</span>
<span class="n">neutron_binding_profiles</span> <span class="o">=</span> <span class="n">phys1</span>

<span class="p">[</span><span class="n">phys1</span><span class="p">]</span>
<span class="n">neutron_switch_id</span> <span class="o">=</span> <span class="mf">10.63</span><span class="o">.</span><span class="mf">152.254</span>
<span class="n">neutron_port_id</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="mi">1</span><span class="o">-</span><span class="mi">4</span>
<span class="n">neutron_switch_info</span> <span class="o">=</span> <span class="n">switch_ip</span><span class="p">:</span><span class="mf">10.63</span><span class="o">.</span><span class="mf">152.254</span>
</pre></div>
</div>
<p><a class="reference external" href="#manila.configuration.network.simple_neutron_bind.options">table_title</a>
lists the configuration options available for the Simple Neutron Port
Binding network plugin:</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="5%" />
<col width="12%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Type</th>
<th class="head">Default Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">neutron_net_id</span></code></td>
<td>Required</td>
<td>&#160;</td>
<td>Specify the ID of a Neutron network from which ports should be created.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">neutron_subnet_id</span></code></td>
<td>Required</td>
<td>&#160;</td>
<td>Specify the ID of a Neutron subnet from which ports should be created.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">neutron_host_id</span></code></td>
<td>Optional</td>
<td>Perceived system hostname</td>
<td>Hostname of the node where the manila-share service is running, configured with the NetApp backend.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">neutron_vnic_type</span></code></td>
<td>Optional</td>
<td>baremetal</td>
<td>Virtual NIC type for the ports created by Neutron on this network. Supported type is “baremetal”</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">neutron_binding_profiles</span></code></td>
<td>Optional</td>
<td>&#160;</td>
<td>Comma separated list of binding profile sections. Each of these sections can contain specific switch information and they can be shared amongst different backends.</td>
</tr>
</tbody>
</table>
<p>Table: Configuration options for Simple Neutron Port Binding Network
Plugin</p>
<p>In spirit this plugin works exactly like the Simple Neutron Port Binding
Network Plugin that is mentioned above. The only difference being that
the Neutron network is not configured within <code class="docutils literal"><span class="pre">manila.conf</span></code> by the
administrator. Use of this plugin allows Manila to derive network information
from the Share Network objects created by the tenants. To set up the configurable
Neutron port binding network plugin, the following options should be added to
the driver-specific stanza within the Manila configuration file (<code class="docutils literal"><span class="pre">manila.conf</span></code>).
The Neutron binding profile in this example is for a Cisco Nexus 9000 switch:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">network_api_class</span> <span class="o">=</span> <span class="n">manila</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">neutron</span><span class="o">.</span><span class="n">neutron_network_plugin</span><span class="o">.</span><span class="n">NeutronBindNetworkPlugin</span>
<span class="n">neutron_host_id</span> <span class="o">=</span> <span class="n">netapp_lab42</span>
<span class="n">neutron_vnic_type</span> <span class="o">=</span> <span class="n">baremetal</span>
<span class="n">neutron_binding_profiles</span> <span class="o">=</span> <span class="n">phys1</span>

<span class="p">[</span><span class="n">phys1</span><span class="p">]</span>
<span class="n">neutron_switch_id</span> <span class="o">=</span> <span class="mf">10.63</span><span class="o">.</span><span class="mf">152.254</span>
<span class="n">neutron_port_id</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="mi">1</span><span class="o">-</span><span class="mi">4</span>
<span class="n">neutron_switch_info</span> <span class="o">=</span> <span class="n">switch_ip</span><span class="p">:</span><span class="mf">10.63</span><span class="o">.</span><span class="mf">152.254</span>
</pre></div>
</div>
<p><a class="reference external" href="#manila.configuration.network.neutron_bind.options">table_title</a>
lists the configuration options available for the configurable Neutron
Port Binding network plugin:</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="5%" />
<col width="12%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Type</th>
<th class="head">Default Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">neutron_host_id</span></code></td>
<td>Optional</td>
<td>Perceived system hostname</td>
<td>Hostname of the node where the manila-share service is running, configured with the NetApp backend.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">neutron_vnic_type</span></code></td>
<td>Optional</td>
<td>baremetal</td>
<td>Virtual NIC type for the ports created by Neutron on the given network. Supported type is “baremetal”</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">neutron_binding_profiles</span></code></td>
<td>Optional</td>
<td>&#160;</td>
<td>Comma separated list of binding profile sections. Each of these sections can contain specific switch information and they can be shared amongst different backends.</td>
</tr>
</tbody>
</table>
<p>Table: Configuration options for the tenant configurable Neutron Port
Binding Network Plugin</p>
</div>


              </div>
            </div>
          </div>
          <div class="docs-actions">
          
            <a href="../section_manila-configuration.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Configuration"></i></a>
          
          
            <a href="section_unified-driver.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: NetApp Data ONTAP Drivers for OpenStack File Share Storage (Manila)"></i></a>
          
            <a id="logABugLink3" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
          
          </div>
          <div class="row docs-byline bottom">
            <div class="docs-updated">updated: 2017-08-25 19:28</div>
          </div>
          <div class="row">
            <div class="col-lg-8 col-md-8 col-sm-8 docs-license">
<a href="https://creativecommons.org/licenses/by/3.0/">
 <img src="../../_static/images/docs/license.png" alt="Creative Commons Attribution 3.0 License"/>
</a>
<p>
 Except where otherwise noted, this document is licensed under
 <a href="https://creativecommons.org/licenses/by/3.0/">Creative Commons
 Attribution 3.0 License</a>.
</p>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-4 docs-actions-wrapper">
            <!-- ID buglinkbottom added so that pre-filled doc bugs
                 are sent to Launchpad projects related to the
                 document -->
              <a href="#" id="logABugLink2" class="docs-footer-actions"><i class="fa fa-bug"></i> found an error? report a bug</a>
              <a href="http://netapp.io/slack/" class="docs-footer-actions"><i class="fa fa-question-circle"></i> questions?</a>
            </div>
          </div>
        </div>
<div class="col-lg-3 col-md-4 col-sm-4 col-lg-pull-9 col-md-pull-8 col-sm-pull-8 docs-sidebar">
  <div class="btn-group docs-sidebar-releases">
<a href="../../index.html">
  <button href="#" type="button"
          class="btn docs-sidebar-release-select">NetApp OpenStack Docs 0.1</button>
</a>

  </div>
  <div class="docs-sidebar-toc">
    <div class="docs-sidebar-section" id="table-of-contents">
      <h4></h4>
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../ch_executive-summary.html">Executive Summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ch_openstack-overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ch_netapp-storage.html">About NetApp Storage Systems and Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ch_cinder.html">OpenStack Block Storage Service (Cinder)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ch_glance-image-service.html">Image Service (Glance)</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../ch_manila.html">Shared File System Service (Manila)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../section_manila-overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../section_manila-key-concepts.html">Key Concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../section_manila-processes.html">Process Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../section_manila-api-overview.html">API Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../section_manila-deployment-choices.html">Theory of Operation &amp; Deployment Choices</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../section_manila-configuration.html">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../section_manila-examples.html">Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../ch_nova.html">Compute Service (Nova)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ch_swift.html">Object Storage Service (Swift)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ch_operations.html">Operational Considerations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendices/appendix_packaging.html">Packaging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendices/appendix_debug.html">Troubleshooting</a></li>
</ul>

    </div>
  </div>
</div>
      </div>
    </div>
<footer>
  <div class="container">
    <div class="row footer-links">
      <div class="col-lg-2 col-sm-2">
        <h3>NetApp Support</h3>
        <ul>
          <li><a href="https://community.netapp.com//">NetApp Community Forums</a></li>
          <li><a href="https://mysupport.netapp.com/">NetApp Support</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>News & Blogs</h3>
        <ul>
          <li><a href="http://planet.openstack.org/">Commnunity Blog</a></li>
          <li><a href="http://openstack.org/news/">Community News</a></li>
          <li><a href="http://netapp.io/blog/">thePub Blog</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Upstream Documentation</h3>
        <ul>
          <li><a href="http://openstack.org/software/start/">Getting Started</a></li>
          <li><a href="http://openstack.org/projects/openstack-faq/">Common Questions</a></li>
          <li><a href="http://openstack.org/projects/">Projects</a></li>
          <li><a href="http://docs.openstack.org">OpenStack Manuals</a></li>
          <li><a href="http://developer.openstack.org">API Documentation</a></li>
        </ul>
      </div>
      <div class="col-lg-4 col-sm-4">
        <h3>Legal</h3>
        <p class="fine-print">
          The OpenStack project is provided under the
          <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 license</a>
        </p>
      </div>
    </div>
  </div>
</footer>
<!-- jQuery -->
<script type="text/javascript" src="../../_static/js/jquery-3.1.1.js"></script>

<!-- Bootstrap JavaScript -->
<script type="text/javascript" src="../../_static/js/bootstrap.js"></script>

<!-- The rest of the JS -->
<script type="text/javascript" src="../../_static/js/navigation.js"></script>

<!-- Docs JS -->
<script type="text/javascript" src="../../_static/js/docs.js"></script>

<!-- Popovers -->
<script type="text/javascript" src="../../_static/js/webui-popover.js"></script>

<!-- Javascript for page -->
<script language="JavaScript">
/* build a description of this page including SHA, source location on git repo,
   build time and the project's launchpad bug tag. Set the HREF of the bug
   buttons */

    var lineFeed = "%0A";
    var gitURL = "Source: Can't derive source file URL";

    /* there have been cases where "pagename" wasn't set; better check for it */
        /* The URL of the source file on Git is based on the giturl variable
           in conf.py, which must be manually initialized to the source file
           URL in Git.
           "pagename" is a standard sphinx parameter containing the name of
           the source file, without extension.                             */

        var sourceFile = "manila/configuration/section_network-plugins" + ".rst";
        gitURL = "Source: https://github.com/NetApp-openstack-dev/openstack-docs" + "/" + sourceFile;

    /* gitsha, project and bug_tag rely on variables in conf.py */
    var gitSha = "SHA: 25dbc33edfc804a4d81fe20f7bb28478ac537a1d";
        var bugProject = "NetApp-openstack-dev/openstack-docs";
        var bugTitle = "Manila Network Plugins in NetApp OpenStack Docs";
    var fieldTags = "docs, dog";
        var useStoryboard = "";


    /* "last_updated" is the build date and time. It relies on the
       conf.py variable "html_last_updated_fmt", which should include
       year/month/day as well as hours and minutes                   */
    var buildstring = "Release: 0.1 on 2017-08-25 19:28";

    var fieldComment = encodeURI(buildstring) +
                       lineFeed + encodeURI(gitSha) +
                       lineFeed + encodeURI(gitURL) ;

    logABug(bugTitle, bugProject, fieldComment, fieldTags);
</script>

  </body>
</html>